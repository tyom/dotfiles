if [ -f ~/bin/bash_completion ] ; then
    BASH_COMPLETION=~/bin/dotfiles/bin/bash_completion
    BASH_COMPLETION_DIR=~/bin/dotfiles/bin/bash_completion.d
    export BASH_COMPLETION BASH_COMPLETION_DIR
    . ~/bin/bash_completion
fi

setopt prompt_subst

# Tab completion fix for 'cd ..<TAB>'
zstyle ':completion:*' special-dirs true

source ~/bin/dotfiles/zsh/prompt

#############################
# Other Options

# setopt PRINT_EXIT_VALUE

setopt CORRECT
setopt CORRECTALL

setopt hist_ignore_dups     # ignore duplication command history list
setopt share_history        # share command history data
setopt HIST_IGNORE_SPACE
setopt APPEND_HISTORY       # write history only when closing
setopt EXTENDED_HISTORY     # add more info

# Other tabbing options
# setopt NO_AUTO_MENU
# setopt BASH_AUTO_LIST

#############################
# Variables

# Quote pasted URLs
autoload url-quote-magic
zle -N self-insert url-quote-magic

HISTFILE=~/.zsh_history
SAVEHIST=10000
HISTSIZE=10000

REPORTTIME=10 # Show elapsed time if command took more than X seconds
LISTMAX=0 # ask to complete if top of list would scroll off screen

# Load completions for Ruby, Git, etc.
autoload compinit
compinit

# Make CTRL-W delete after other chars, not just spaces
WORDCHARS=${WORDCHARS//[&=\/;\!#%\{]}


##############################
# Key bindings

bindkey -e
# Add reverse tab completion
bindkey '^[[Z' reverse-menu-complete
# Fix Fn-Backspace to mean Delete
bindkey "^[[3~" delete-char
# Fix Fn-Left/Fn-Right to go to beginning/end of line
bindkey '^[[H' beginning-of-line
bindkey '^[[F' end-of-line
